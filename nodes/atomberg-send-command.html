<script type="text/javascript">
    RED.nodes.registerType('atomberg-send-command', {
        category: 'atomberg',
        color: '#F6B833',
        defaults: {
          "name": {value:""},
          "command": {value:""},
          "creds": {value:"", type:"atomberg-credentials"},
        },
        inputs: 1,
        outputs: 1,
        icon: "icons/atomberg-logo.svg",
        label: function() {
            return this.name||"atomberg-send-command";
        },
        oneditprepare: () => {
          $("#node-input-command").typedInput({
              type:"msg",
              types:["msg"],
              typeField: "#node-input-command-type"
          })
        }
    });

</script>

<script type="text/x-red" data-template-name="atomberg-send-command">
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-creds"><i class="icon-tag"></i> Credentials</label>
    <input type="text" id="node-input-creds" placeholder="Atomberg Credentials">
  </div>
  <div class="form-row">
      <label for="node-input-command"><i class="fa fa-tag"></i> Command Payload</label>
      <input type="text" id="node-input-command" placeholder="Command">
      <input type="hidden" id="node-input-command-type">
  </div>
</script>

<script type="text/html" data-help-name="atomberg-send-command">
    <p>This node can be used to send a command to a specific Atomberg device. Requires the device_id of the device you want to control, which can be obtained from the 'Get List of Devices' node. Device ID and Command input should be provided in `msg.payload` from the previous connected node.</p>
     <p>
        For example:
        <code>
<pre>
msg.payload = {
  device_id: "ffrvsrv123s",
  {
    "speed": 6
  }
};
return msg;
</pre>
        </code>
     </p>
     <p>
      API Docs:&nbsp;<a href="https://developer.atomberg-iot.com/#get-/v1/send_command" target="_blank">Send Command</a>
    </p>
</script>
